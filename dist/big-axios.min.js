/*! For license information please see big-axios.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("axios")):"function"==typeof define&&define.amd?define("big-axios",["axios"],e):"object"==typeof exports?exports["big-axios"]=e(require("axios")):t.BigAxios=e(t.axios)}(self,(t=>(()=>{"use strict";var e={300:e=>{e.exports=t}},s={};function o(t){var r=s[t];if(void 0!==r)return r.exports;var i=s[t]={exports:{}};return e[t](i,i.exports,o),i.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{o.r(r),o.d(r,{default:()=>p});var t=o(300),e=o.n(t);const s={400:{msg:"错误的请求"},401:{msg:"验证失败"},403:{msg:"服务器拒绝访问，请检查操作是否合法"},404:{msg:"请求地址不存在"},405:{msg:"您没有权限进行此操作"},406:{msg:"请您保证内容完整后提交"},409:{msg:"内容已存在"},429:{msg:"请求过于频繁，请稍后再试"},413:{msg:"请求实体过大"},414:{msg:"请求URI过长"},415:{msg:"不支持的媒体类型"},500:{msg:"服务器内部错误，请联系管理员"},501:{msg:""},502:{msg:"网关错误，请检查您的网络"},503:{msg:"服务器维护中,请稍后重试"},504:{msg:"网关连接超时，请检查您的网络"}},i=class{constructor(t){this.serviceApiErrorMsgs={"-9999":{msg:"发起网络请求失败"},...t}}getExceptionMsg=function(t,e){const o=this.serviceApiErrorMsgs[t+""]??s[t+""];return o?(o.callback&&o.callback(),e||o.msg):e||"未知错误"}},n=[];let a=new AbortController,c=[];const p=new class{http=e().create();interceptorIds=[];exception=null;get axiosHttp(){return this.http}get builtInInterceptorIds(){return this.interceptorIds}create(t,s,{loginPath:o="/login",successfulCodes:r=[200,0,"200"]}={}){return this.exception=new i(t),this.url="",this.data={},this.http=e().create(s),this.interceptorIds.push(this.http.interceptors.request.use((t=>(t.signal=a.signal,t)),(t=>({...t,message:this.exception.getExceptionMsg(-9999)})))),this.interceptorIds.push(this.http.interceptors.response.use((t=>{if(r.includes(t.data.code)||"application/octet-stream"===t.headers["content-type"]||"image/Jpeg"===t.headers["content-type"])return Promise.resolve(t);{const e={...t,errorUrl:t.request.responseURL,message:this.exception.getExceptionMsg(t.data.code,t.data.errMsg||t.data.message||t.data.msg)};return Promise.reject(e)}}),(t=>{let e="";t.response?401===t.response.status?(n.push(t.response),1===n.length&&(e=this.exception.getExceptionMsg(t.response.status,t.response.data.message||t.response.data.errMsg||"登录信息已过期"),location.href.includes(o)||(location.href=o))):e=this.exception.getExceptionMsg(t.response.status,t.response.data.errMsg||t.response.data.message||""):e=this.exception.getExceptionMsg(504,"");const s={...t,config:t.config,data:t.response.data,errorUrl:t.config?t.config.url:"",isCanceled:"canceled"===t.message,message:e};return Promise.reject(s)}))),this}interceptors={request:{...this.http.interceptors.request,use:(t,e,s={synchronous:!1,runWhen:null})=>this.http.interceptors.request.use(t,e,s)},response:{...this.http.interceptors.response,use:(t,e,s={synchronous:!1,runWhen:null})=>this.http.interceptors.response.use(t,e,s)}};ajax(t,e={},{type:s="GET",options:o={}}={}){switch(this.url=t,this.type=s.toLocaleUpperCase().trim(),this.data="GET"===this.type?{params:e}:e,this.options=o,this.type){case"GET":return new Promise(((t,e)=>{const s=Object.assign(this.data,this.options);this.http.get(this.url,s).then((e=>(Blob,t(e.data)))).catch((t=>(this.log(t),e(t))))}));case"POST":return new Promise(((t,e)=>{if(!this.url.includes("login")){const t=JSON.stringify(this.data);if(c.find((e=>e.url===this.url&&e.data===t)))return e({message:"请不要提交重复的数据"});c.push({url:this.url,data:t})}this.http.post(this.url,this.data,this.options).then((e=>(Blob,t(e.data)))).catch((t=>(c=c.filter((e=>e.url!==t.config.url||e.data!==t.config.data)),this.log(t),e(t))))}));case"PUT":return new Promise(((t,e)=>{this.http.put(this.url,this.data,this.options).then((e=>t(e.data))).catch((t=>(this.log(t),e(t))))}));case"DELETE":return new Promise(((t,e)=>{this.http.delete(this.url,this.options).then((e=>t(e.data))).catch((t=>(this.log(t),e(t))))}))}}get(t,e={},s={}){return this.ajax(t,e,{options:s})}post(t,e={},s={}){return this.ajax(t,e,{type:"POST",options:s})}put(t,e={},s={}){return this.ajax(t,e,{type:"PUT",options:s})}delete(t,e={}){return this.ajax(t,{},{type:"DELETE",options:e})}abort(){a.abort(),a=new AbortController}clearPostData(){c=[]}log(t){if("canceled"===t.message)return console.warn("尚未完成的 http 请求已取消: ",t.message);console.group("%c http 请求错误：","color:red;"),Object.keys(t).length>0?(console.log("%c地址：","font-family:PingFang SC, Microsoft YaHei;",t.errorUrl),console.log("%c方式：","font-family:PingFang SC, Microsoft YaHei;",t.config.method),console.log("%c参数：","font-family:PingFang SC, Microsoft YaHei;",t.config.params),console.log("%c结果：","font-family:PingFang SC, Microsoft YaHei;",t.data),console.log("%c详细信息：","font-family:PingFang SC, Microsoft YaHei;",t)):console.log("%c error:","font-family:PingFang SC, Microsoft YaHei;",t),console.groupEnd()}}})(),r})()));
//# sourceMappingURL=big-axios.min.map