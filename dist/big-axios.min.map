{"version":3,"file":"big-axios.min.js","mappings":"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","sources":["webpack://BigAxios/webpack/universalModuleDefinition","webpack://BigAxios/external umd \"axios\"","webpack://BigAxios/webpack/bootstrap","webpack://BigAxios/webpack/runtime/compat get default export","webpack://BigAxios/webpack/runtime/define property getters","webpack://BigAxios/webpack/runtime/hasOwnProperty shorthand","webpack://BigAxios/webpack/runtime/make namespace object","webpack://BigAxios/./src/Exceptions.ts","webpack://BigAxios/./src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"axios\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"big-axios\", [\"axios\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"big-axios\"] = factory(require(\"axios\"));\n\telse\n\t\troot[\"BigAxios\"] = factory(root[\"axios\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__300__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__300__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import type { ExceptionMsg } from '../types/index';\n\n// 系统错误\nconst errorMsgs: Record<string, ExceptionMsg> = {\n   400: {\n      msg: '错误的请求'\n   },\n   401: {\n      msg: '验证失败'\n   },\n   403: {\n      msg: '服务器拒绝访问，请检查操作是否合法'\n   },\n   404: {\n      msg: '请求地址不存在'\n   },\n   405: {\n      msg: '您没有权限进行此操作'\n   },\n   406: {\n      msg: '请您保证内容完整后提交'\n   },\n   409: {\n      msg: '内容已存在'\n   },\n   429: {\n      msg: '请求过于频繁，请稍后再试'\n   },\n   413: {\n      msg: '请求实体过大'\n   },\n   414: {\n      msg: '请求URI过长'\n   },\n   415: {\n      msg: '不支持的媒体类型'\n   },\n   500: {\n      msg: '服务器内部错误，请联系管理员'\n   },\n   501: {\n      msg: ''\n   },\n   502: {\n      msg: '网关错误，请检查您的网络'\n   },\n   503: {\n      msg: '服务器维护中,请稍后重试'\n   },\n   504: {\n      msg: '网关连接超时，请检查您的网络'\n   }\n};\n\nclass Exception {\n   private serviceApiErrorMsgs: Record<string, ExceptionMsg>;\n   constructor(msgs: Record<string, ExceptionMsg>) {\n      this.serviceApiErrorMsgs = {\n         '-9999': {\n            msg: '发起网络请求失败'\n         },\n         ...msgs\n      };\n   }\n\n   getExceptionMsg = function (errorCode: number | undefined, errorMsg?: string) {\n      const error = this.serviceApiErrorMsgs[errorCode + ''] ?? errorMsgs[errorCode + ''];\n      if (error) {\n         if (error.callback) {\n            error.callback();\n         }\n\n         return errorMsg || error.msg;\n      } else {\n         if (errorMsg) {\n            return errorMsg;\n         } else {\n            return '未知错误';\n         }\n      }\n   };\n}\n\nexport default Exception;\n","import axios from 'axios';\r\nimport Exceptions from './Exceptions';\r\n\r\nimport type {\r\n   AxiosRequestConfig,\r\n   AxiosInstance,\r\n   CreateAxiosDefaults,\r\n   AxiosInterceptorOptions,\r\n   AxiosInterceptorManager,\r\n   InternalAxiosRequestConfig,\r\n   AxiosResponse\r\n} from 'axios';\r\nimport type {\r\n   Method,\r\n   ResponsePromise,\r\n   Response,\r\n   ExceptionMsg,\r\n   BigAxios as BigAxiosInstance,\r\n   ExtraOptions,\r\n   BigAxiosRequestConfig,\r\n   BigAxiosResponse,\r\n   InternalBigAxiosInstance,\r\n   InternalBigAxiosRequestConfig\r\n} from '../types/index';\r\n\r\nconst queue401 = [];\r\nlet controller = new AbortController();\r\nlet postRequestList: { url: string; data: string }[] = [];\r\n\r\nclass BigAxios {\r\n   private http: InternalBigAxiosInstance;\r\n   private url: string;\r\n   private type: string | undefined;\r\n   private data: Record<string, any>;\r\n   private options: AxiosRequestConfig;\r\n   private interceptorIds: number[] = [];\r\n   private exception: Exceptions = null;\r\n\r\n   constructor() {\r\n      this.create();\r\n   }\r\n\r\n   /**\r\n    * 创建 big-axios 实例\r\n    * @param serviceApiErrorMsgs 服务端返回的错误码与错误信息\r\n    * @param config 配置，可参考 axios 的配置项\r\n    * @param extraOptions loginPath：登录页面路径，默认值：/login，用于未登录时跳转到登录页面；\r\n    *                     successfulCodes：业务 api 返回的成功状态码，默认值：[200, 0, '200']；\r\n    *                     responseDataObjectKey：请求响应数据（response.data）中的值为请求结果的属性的名称，默认值：data；\r\n    *                     defaultResponseData：用于指定请求返回结果的默认值，结合 responseDataObjectKey 使用；\r\n    * @returns {BigAxiosInstance} big-axios 实例\r\n    */\r\n   create(serviceApiErrorMsgs?: Record<string, ExceptionMsg>, config?: CreateAxiosDefaults, extraOptions?: ExtraOptions): BigAxiosInstance {\r\n      this.exception = new Exceptions(serviceApiErrorMsgs);\r\n\r\n      const myOptions = { loginPath: '/login', successfulCodes: [200, 0, '200'], responseDataObjectKey: 'data', ...extraOptions };\r\n\r\n      this.url = '';\r\n      this.data = {};\r\n\r\n      this.http = axios.create(config);\r\n\r\n      // 创建内置请求拦截器\r\n      this.interceptorIds.push(\r\n         this.http.interceptors.request.use(\r\n            (config) => {\r\n               // 设置请求可取消\r\n               config.signal = controller.signal;\r\n\r\n               return config;\r\n            },\r\n            (err) => {\r\n               return {\r\n                  ...err,\r\n                  message: this.exception.getExceptionMsg(-9999)\r\n               };\r\n            }\r\n         )\r\n      );\r\n\r\n      // 创建内置响应拦截器\r\n      this.interceptorIds.push(\r\n         this.http.interceptors.response.use(\r\n            (response) => {\r\n               if (\r\n                  myOptions.successfulCodes.includes(response.data.code) ||\r\n                  response.headers['content-type'] === 'application/octet-stream' ||\r\n                  response.headers['content-type'] === 'image/Jpeg'\r\n               ) {\r\n                  return Promise.resolve(response);\r\n               } else {\r\n                  const errorData = {\r\n                     ...response,\r\n                     errorUrl: response.request.responseURL,\r\n                     message: this.exception.getExceptionMsg(\r\n                        response.data.code,\r\n                        response.data.errMsg || response.data.message || response.data.msg\r\n                     )\r\n                  };\r\n\r\n                  return Promise.reject(errorData);\r\n               }\r\n            },\r\n            (err) => {\r\n               let errMsg = '';\r\n               if (err.response) {\r\n                  if (err.response.status === 401) {\r\n                     queue401.push(err.response);\r\n                     // 多个接口同时请求，只提示一次登录过期\r\n                     if (queue401.length === 1) {\r\n                        errMsg = this.exception.getExceptionMsg(\r\n                           err.response.status,\r\n                           err.response.data.message || err.response.data.errMsg || '登录信息已过期'\r\n                        );\r\n\r\n                        if (!location.href.includes(myOptions.loginPath)) {\r\n                           location.href = myOptions.loginPath;\r\n                        }\r\n                     }\r\n                  } else {\r\n                     errMsg = this.exception.getExceptionMsg(\r\n                        err.response.status,\r\n                        err.response.data.errMsg || err.response.data.message || ''\r\n                     );\r\n                  }\r\n               } else {\r\n                  errMsg = this.exception.getExceptionMsg(504, '');\r\n               }\r\n\r\n               const errorData = {\r\n                  ...err,\r\n                  config: err.config,\r\n                  data: err.response.data,\r\n                  errorUrl: err.config ? err.config.url : '',\r\n                  isCanceled: err.message === 'canceled', // 主动取消请求\r\n                  message: errMsg\r\n               };\r\n\r\n               return Promise.reject(errorData);\r\n            }\r\n         )\r\n      );\r\n      this.interceptorIds.push(\r\n         this.http.interceptors.response.use(\r\n            (response) => {\r\n               if (\r\n                  myOptions.successfulCodes.includes(response.data.code) &&\r\n                  response.data[myOptions.responseDataObjectKey] === null &&\r\n                  Object.hasOwn(myOptions, 'defaultResponseData')\r\n               ) {\r\n                  return Promise.resolve({\r\n                     ...response,\r\n                     data: {\r\n                        ...response.data,\r\n                        [myOptions.responseDataObjectKey]:\r\n                           response.config.defaultResponseData == undefined\r\n                              ? myOptions.defaultResponseData\r\n                              : response.config.defaultResponseData\r\n                     }\r\n                  });\r\n               } else {\r\n                  return response;\r\n               }\r\n            },\r\n            (err) => err\r\n         )\r\n      );\r\n\r\n      this.interceptors = {\r\n         request: {\r\n            ...this.http.interceptors.request,\r\n            use: (\r\n               onFulfilled?:\r\n                  | ((value: InternalAxiosRequestConfig) => InternalAxiosRequestConfig | Promise<InternalAxiosRequestConfig>)\r\n                  | null,\r\n               // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n               onRejected?: ((error: any) => any) | null,\r\n               options: AxiosInterceptorOptions = { synchronous: false, runWhen: null }\r\n            ): number => {\r\n               return this.http.interceptors.request.use(onFulfilled, onRejected, options);\r\n            }\r\n         },\r\n         response: {\r\n            ...this.http.interceptors.response,\r\n            use: (\r\n               onFulfilled?: ((value: AxiosResponse) => AxiosResponse | Promise<AxiosResponse>) | null,\r\n               // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n               onRejected?: ((error: any) => any) | null,\r\n               options: AxiosInterceptorOptions = { synchronous: false, runWhen: null }\r\n            ): number => {\r\n               return this.http.interceptors.response.use(onFulfilled, onRejected, options);\r\n            }\r\n         }\r\n      };\r\n\r\n      return this;\r\n   }\r\n\r\n   interceptors: {\r\n      request: AxiosInterceptorManager<InternalBigAxiosRequestConfig>;\r\n      response: AxiosInterceptorManager<BigAxiosResponse>;\r\n   };\r\n\r\n   ajax<D = any, M = string, U = Response<D | Blob, M>>(\r\n      url: string,\r\n      data: Record<string, any> = {},\r\n      { type = 'GET', options = {} }: { type?: Method; options?: BigAxiosRequestConfig } = {}\r\n   ): ResponsePromise<D, M, U> {\r\n      this.url = url;\r\n      this.type = type.toLocaleUpperCase().trim();\r\n      this.data = this.type === 'GET' ? { params: data } : data;\r\n      this.options = options;\r\n\r\n      switch (this.type) {\r\n         case 'GET': {\r\n            return new Promise<U>((resolve, reject) => {\r\n               const config = Object.assign(this.data, this.options);\r\n               this.http\r\n                  .get<U, AxiosResponse<U>>(this.url, config)\r\n                  .then((response) => {\r\n                     // 图片\r\n                     if (response instanceof Blob) {\r\n                        return resolve(response.data);\r\n                     }\r\n\r\n                     return resolve(response.data);\r\n                  })\r\n                  .catch((err) => {\r\n                     this.log(err);\r\n                     return reject(err);\r\n                  });\r\n            });\r\n         }\r\n         case 'POST': {\r\n            return new Promise<U>((resolve, reject) => {\r\n               if (!this.url.includes('login')) {\r\n                  const dataJson = JSON.stringify(this.data);\r\n                  if (postRequestList.find((pd) => pd.url === this.url && pd.data === dataJson)) {\r\n                     return reject({ message: '请不要提交重复的数据' });\r\n                  }\r\n                  postRequestList.push({ url: this.url, data: dataJson });\r\n               }\r\n\r\n               this.http\r\n                  .post<U, AxiosResponse<U>>(this.url, this.data, this.options)\r\n                  .then((response) => {\r\n                     // blob类型\r\n                     if (response instanceof Blob) {\r\n                        return resolve(response.data);\r\n                     }\r\n\r\n                     return resolve(response.data);\r\n                  })\r\n                  .catch((err) => {\r\n                     postRequestList = postRequestList.filter((pd) => pd.url !== err.config.url || pd.data !== err.config.data);\r\n\r\n                     this.log(err);\r\n\r\n                     return reject(err);\r\n                  });\r\n            });\r\n         }\r\n         case 'PUT': {\r\n            return new Promise<U>((resolve, reject) => {\r\n               this.http\r\n                  .put<U, AxiosResponse<U>>(this.url, this.data, this.options)\r\n                  .then((response) => {\r\n                     return resolve(response.data);\r\n                  })\r\n                  .catch((err) => {\r\n                     this.log(err);\r\n                     return reject(err);\r\n                  });\r\n            });\r\n         }\r\n         case 'DELETE': {\r\n            return new Promise<U>((resolve, reject) => {\r\n               this.http\r\n                  .delete<U, AxiosResponse<U>>(this.url, this.options)\r\n                  .then((response) => {\r\n                     return resolve(response.data);\r\n                  })\r\n                  .catch((err) => {\r\n                     this.log(err);\r\n                     return reject(err);\r\n                  });\r\n            });\r\n         }\r\n      }\r\n   }\r\n\r\n   get<D = any, M = string, U = Response<D, M>>(url: string, data = {}, options: BigAxiosRequestConfig = {}): ResponsePromise<D, M, U> {\r\n      return this.ajax(url, data, { options: options });\r\n   }\r\n\r\n   post<D = any, M = string, U = Response<D, M>>(url: string, data = {}, options: BigAxiosRequestConfig = {}): ResponsePromise<D, M, U> {\r\n      return this.ajax(url, data, { type: 'POST', options: options });\r\n   }\r\n\r\n   put<D = any, M = string, U = Response<D, M>>(url: string, data = {}, options: BigAxiosRequestConfig = {}): ResponsePromise<D, M, U> {\r\n      return this.ajax(url, data, { type: 'PUT', options: options });\r\n   }\r\n\r\n   delete<D = any, M = string, U = Response<D, M>>(url: string, options: BigAxiosRequestConfig = {}): ResponsePromise<D, M, U> {\r\n      return this.ajax(url, {}, { type: 'DELETE', options: options });\r\n   }\r\n\r\n   abort(): void {\r\n      // 取消尚未完成的请求\r\n      controller.abort();\r\n\r\n      // 重置 controller 防止新请求无法发出\r\n      controller = new AbortController();\r\n   }\r\n\r\n   clearPostData(): void {\r\n      postRequestList = [];\r\n   }\r\n\r\n   private log(err: { message: string; errorUrl: string; config: AxiosRequestConfig; data: Record<string, string> }) {\r\n      if (err.message === 'canceled') {\r\n         return console.warn('尚未完成的 http 请求已取消: ', err.message);\r\n      }\r\n\r\n      console.group('%c http 请求错误：', 'color:red;');\r\n\r\n      const keys = Object.keys(err);\r\n      if (keys.length > 0) {\r\n         console.log('%c地址：', 'font-family:PingFang SC, Microsoft YaHei;', err.errorUrl);\r\n         console.log('%c方式：', 'font-family:PingFang SC, Microsoft YaHei;', err.config.method);\r\n         console.log('%c参数：', 'font-family:PingFang SC, Microsoft YaHei;', err.config.params);\r\n         console.log('%c结果：', 'font-family:PingFang SC, Microsoft YaHei;', err.data);\r\n         console.log('%c详细信息：', 'font-family:PingFang SC, Microsoft YaHei;', err);\r\n      } else {\r\n         console.log(`%c error:`, 'font-family:PingFang SC, Microsoft YaHei;', err);\r\n      }\r\n      console.groupEnd();\r\n   }\r\n\r\n   get builtInInterceptorIds(): number[] {\r\n      return this.interceptorIds;\r\n   }\r\n\r\n   axiosCreate(config?: CreateAxiosDefaults<any>): AxiosInstance {\r\n      return axios.create(config);\r\n   }\r\n}\r\n\r\nexport default new BigAxios();\r\n"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__300__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","errorMsgs","msg","constructor","msgs","this","serviceApiErrorMsgs","getExceptionMsg","errorCode","errorMsg","error","callback","queue401","controller","AbortController","postRequestList","interceptorIds","exception","create","config","extraOptions","Exceptions","myOptions","loginPath","successfulCodes","responseDataObjectKey","url","data","http","axios","push","interceptors","request","use","signal","err","message","response","includes","code","headers","Promise","resolve","errorData","errorUrl","responseURL","errMsg","reject","status","length","location","href","isCanceled","hasOwn","defaultResponseData","onFulfilled","onRejected","options","synchronous","runWhen","ajax","type","toLocaleUpperCase","trim","params","assign","then","Blob","catch","log","dataJson","JSON","stringify","find","pd","post","filter","put","delete","abort","clearPostData","console","warn","group","keys","method","groupEnd","builtInInterceptorIds","axiosCreate"],"sourceRoot":""}